SET
  NAMES utf8mb4;

USE ShiftDB;

DROP TABLE IF EXISTS company;
CREATE TABLE
  company (
    company_id INT AUTO_INCREMENT PRIMARY KEY,
    company_name VARCHAR(512)
  );
INSERT INTO
  company (company_id, company_name)
VALUES
  (1, 'Empresa de Teste');


DROP TABLE IF EXISTS user;
CREATE TABLE
  user (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    user_name VARCHAR(512),
    user_email VARCHAR(512),
    work_shift VARCHAR(512),
    company_id INT,
    FOREIGN KEY (company_id) REFERENCES company(company_id)
  );
INSERT INTO
  user (user_id, user_name, user_email, work_shift, company_id)
VALUES
  (1, 'Usuário Teste', 'email_teste@teste.com', '08:00', 1),
  (2, 'Usuário Teste 2', 'email_teste2@teste.com', '08:00', 1);


DROP TABLE IF EXISTS shift_history;
CREATE TABLE
  shift_history (
    user_id INT NOT NULL,
    company_id INT,
    shift_start DATETIME NOT NULL,
    shift_break_start DATETIME NOT NULL,
    shift_break_end DATETIME NOT NULL,
    shift_end DATETIME NOT NULL,
    worked_hours VARCHAR(512),
    CONSTRAINT PRIMARY KEY (user_id, shift_start),
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (company_id) REFERENCES company(company_id)
  );
INSERT INTO
  shift_history (user_id, company_id, shift_start, shift_break_start, shift_break_end, shift_end, worked_hours)
VALUES
  (1, 1, '2020-01-01 08:00:00', '2020-01-01 12:00:00', '2020-01-01 13:00:00', '2020-01-01 17:30:00', '08:30'),
  (1, 1, '2020-01-02 08:00:00', '2020-01-02 12:00:00', '2020-01-02 13:00:00', '2020-01-02 17:00:00', '08:00'),
  (1, 1, '2020-01-03 08:00:00', '2020-01-03 12:00:00', '2020-01-03 13:00:00', '2020-01-03 17:00:00', '08:00'),
  (1, 1, '2020-01-04 08:00:00', '2020-01-04 12:00:00', '2020-01-04 13:00:00', '2020-01-04 17:00:00', '08:00'),
  (1, 1, '2020-01-05 08:00:00', '2020-01-05 12:00:00', '2020-01-05 13:00:00', '2020-01-05 17:00:00', '08:00'),
  (1, 1, '2020-01-06 08:00:00', '2020-01-06 12:00:00', '2020-01-06 13:00:00', '2020-01-06 17:40:00', '08:40'),
  (1, 1, '2020-01-07 08:00:00', '2020-01-07 12:00:00', '2020-01-07 13:00:00', '2020-01-07 17:00:00', '08:00'),
  (1, 1, '2020-01-08 08:00:00', '2020-01-08 12:00:00', '2020-01-08 13:00:00', '2020-01-08 17:00:00', '08:00'),
  (1, 1, '2020-01-09 08:00:00', '2020-01-09 12:00:00', '2020-01-09 13:00:00', '2020-01-09 17:00:00', '08:00'),
  (1, 1, '2020-01-10 08:00:00', '2020-01-10 12:00:00', '2020-01-10 13:00:00', '2020-01-10 17:00:00', '08:00'),
  (1, 1, '2020-01-11 08:00:00', '2020-01-11 12:00:00', '2020-01-11 13:00:00', '2020-01-11 17:00:00', '08:00'),
  (1, 1, '2020-01-12 08:00:00', '2020-01-12 12:00:00', '2020-01-12 13:00:00', '2020-01-12 17:00:00', '08:00'),
  (1, 1, '2020-01-13 08:00:00', '2020-01-13 12:00:00', '2020-01-13 13:00:00', '2020-01-13 17:00:00', '08:00'),
  (1, 1, '2020-01-14 08:00:00', '2020-01-14 12:00:00', '2020-01-14 13:00:00', '2020-01-14 17:00:00', '08:00'),
  (2, 1, '2020-01-01 08:00:00', '2020-01-01 12:00:00', '2020-01-01 13:00:00', '2020-01-01 17:00:00', '08:00'),
  (2, 1, '2020-01-02 08:00:00', '2020-01-02 12:00:00', '2020-01-02 13:00:00', '2020-01-02 17:00:00', '08:00'),
  (2, 1, '2020-01-03 08:00:00', '2020-01-03 12:00:00', '2020-01-03 13:00:00', '2020-01-03 17:00:00', '08:00'),
  (2, 1, '2020-01-04 08:00:00', '2020-01-04 12:00:00', '2020-01-04 13:00:00', '2020-01-04 17:25:00', '08:25'),
  (2, 1, '2020-01-05 08:00:00', '2020-01-05 12:00:00', '2020-01-05 13:00:00', '2020-01-05 17:00:00', '08:00'),
  (2, 1, '2020-01-06 08:00:00', '2020-01-06 12:00:00', '2020-01-06 13:00:00', '2020-01-06 17:00:00', '08:00'),
  (2, 1, '2020-01-07 08:00:00', '2020-01-07 12:00:00', '2020-01-07 13:00:00', '2020-01-07 17:00:00', '08:00'),
  (2, 1, '2020-01-08 08:00:00', '2020-01-08 12:00:00', '2020-01-08 13:00:00', '2020-01-08 17:00:00', '08:00'),
  (2, 1, '2020-01-09 08:00:00', '2020-01-09 12:00:00', '2020-01-09 13:00:00', '2020-01-09 17:15:00', '08:15'),
  (2, 1, '2020-01-10 08:00:00', '2020-01-10 12:00:00', '2020-01-10 13:00:00', '2020-01-10 17:00:00', '08:00'),
  (2, 1, '2020-01-11 08:00:00', '2020-01-11 12:00:00', '2020-01-11 13:00:00', '2020-01-11 17:00:00', '08:00'),
  (2, 1, '2020-01-12 08:00:00', '2020-01-12 12:00:00', '2020-01-12 13:00:00', '2020-01-12 17:00:00', '08:00'),
  (2, 1, '2020-01-13 08:00:00', '2020-01-13 12:00:00', '2020-01-13 13:00:00', '2020-01-13 17:00:00', '08:00'),
  (2, 1, '2020-01-14 08:00:00', '2020-01-14 12:00:00', '2020-01-14 13:00:00', '2020-01-14 17:00:00', '08:00');


DROP TABLE IF EXISTS overshift_history;
CREATE TABLE
  overshift_history (
    user_id INT NOT NULL,
    company_id INT,
    `day` DATE NOT NULL,
    overshift VARCHAR(512),
    CONSTRAINT PRIMARY KEY (user_id, `day`),
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (company_id) REFERENCES company(company_id)
  );
INSERT INTO
  overshift_history (user_id, company_id, `day`, overshift)
VALUES
  (1, 1, '2020-01-01', '00:30'),
  (1, 1, '2020-01-02', '00:00'),
  (1, 1, '2020-01-03', '00:00'),
  (1, 1, '2020-01-04', '00:00'),
  (1, 1, '2020-01-05', '00:00'),
  (1, 1, '2020-01-06', '00:40'),
  (1, 1, '2020-01-07', '00:00'),
  (1, 1, '2020-01-08', '00:00'),
  (1, 1, '2020-01-09', '00:00'),
  (1, 1, '2020-01-10', '00:00'),
  (1, 1, '2020-01-11', '00:00'),
  (1, 1, '2020-01-12', '00:00'),
  (1, 1, '2020-01-13', '00:00'),
  (1, 1, '2020-01-14', '00:00'),
  (2, 1, '2020-01-01', '00:00'),
  (2, 1, '2020-01-02', '00:00'),
  (2, 1, '2020-01-03', '00:00'),
  (2, 1, '2020-01-04', '00:25'),
  (2, 1, '2020-01-05', '00:00'),
  (2, 1, '2020-01-06', '00:00'),
  (2, 1, '2020-01-07', '00:00'),
  (2, 1, '2020-01-08', '00:00'),
  (2, 1, '2020-01-09', '00:15'),
  (2, 1, '2020-01-10', '00:00'),
  (2, 1, '2020-01-11', '00:00'),
  (2, 1, '2020-01-12', '00:00'),
  (2, 1, '2020-01-13', '00:00'),
  (2, 1, '2020-01-14', '00:00');